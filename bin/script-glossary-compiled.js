var input="",reversed=!0,output="",answer="",WordList=[],Wordlist_Unmodified,WordListIndex=[],userClearFirstTry=!0,user_entered=[[],[]],correct_words=[],playing=!1,firstRound=!0;function swapWordList(){WordList.reverse()}document.getElementById("leosinput").addEventListener("keydown",function(a){switch(a.keyCode){case 13:HandleInput()}});function getRandomArbitrary(a,b){return Math.floor(Math.random()*(b-a)+a)}function SaveAndClearInput(){input=document.getElementById("leosinput").value;document.getElementById("leosinput").value=""};var Alternatives=function(a){this.alt=a};Alternatives.prototype.checkAll=function(a){for(var b=0;b<this.alt.length;b++)if(this.alt[b]===a)return!0;return!1};var Word=function(a){this.rawString=a;this.synonyms=[]};function GetWordListFromServer(a){var b=[],d=[],c,e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var a=e.responseText.split(/\r\n|\r|\n/g);for(i=0;i<a.length;i++){var f=a[i].split("=");b[i]=f[0];d[i]=f[1]}c=[b,d]}};e.open("GET",a,!1);e.send();return c};function HandleInput(){if(playing)if(SaveAndClearInput(),input==answer)document.getElementById("response").innerHTML="<span style = 'color: blue;'>Correct!</span>",userClearFirstTry&&(WordList[0].splice(WordListIndex,1),WordList[1].splice(WordListIndex,1)),NewWord();else{var a=correct_words.indexOf(answer);-1==a&&(correct_words.push(answer),user_entered.push([]),a=correct_words.length-1);document.getElementById("response").innerHTML="<span style = 'color: red;'>Incorrect!</span><br></br><span style = 'color: gray;'>The correct answer is: </span><span style = 'color: blue;'>"+
answer+"</span>";user_entered[a].push(input);userClearFirstTry=!1}else firstRound?(document.getElementById("response").innerHTML="<span style = 'color: gray;'>Choose something to practice on the left!</span>",document.getElementById("phrase").innerHTML="<span style = 'color: #00ff00;'>? Left</span>",document.getElementById("leosinput").value=""):(document.getElementById("leosinput").value="",document.getElementById("response").innerHTML="<span style = 'color: Gray;'>The fun is over!</span>")};window.onload=function(){document.title="English Plus";var a=GetWordListFromServer("Word_List_Index.txt");for(i=0;i<a[0].length;i++)document.getElementById("left_menu").innerHTML+="<li class = 'navigation_item' onclick='CallbackFunction(\""+a[1][i]+"\")'>"+a[0][i]+"</li>"};function CallbackFunction(a){WordList_Unmodified=GetWordListFromServer("words/"+a);Start_Glossary()};function NewWord(){if(0==WordList[0].length){firstRound=playing=!1;var a="";if(""==correct_words)document.getElementById("phrase").setAttribute("onclick","Start_Glossary()"),document.getElementById("phrase").innerHTML="?",document.getElementById("response").innerHTML="<span style = 'color: Green;'>All Correct!</span><br></br><span style = 'color: gray;'>Congratulations!</span>";else{var b=""==correct_words.length?0:Math.floor(100*(1-correct_words.length/WordList_Unmodified[0].length)+.5);document.getElementById("phrase").setAttribute("onclick",
"Start_Glossary()");document.getElementById("phrase").innerHTML="?";document.getElementById("response").innerHTML="<span style = 'color: red;'>"+b+"% correct!</span><br></br><span style = 'color: gray;'>Next time, see if you can get them all right!<br></br>Here are your mistakes.</span>";a+="<tbody><tr><th>Correct answer</th><th>Your answers</th></tr>";for(b=0;b<correct_words.length;b++){for(var d="",c=0;c<user_entered[b].length;c++)""!=user_entered[b][c]&&(d=c+1==user_entered[b].length?d+user_entered[b][c]:
d+(user_entered[b][c]+", "));a+="<tr><td>"+correct_words[b]+"</td><td>"+d+"</td></tr>"}a+="</tbody>";document.getElementById("table_of_wrongs").innerHTML=a}}else WordListIndex=getRandomArbitrary(0,WordList[0].length),userClearFirstTry=!0,output=WordList[0][WordListIndex],answer=WordList[1][WordListIndex],document.getElementById("phrase").innerHTML=output};function ReverseButtonPressed(){playing?(reversed=0==reversed?!0:!1,swapWordList(),NewWord()):1==firstRound?HandleInput():document.getElementById("response").innerHTML="<span style = 'color: Gray;'>Click the button just above that one to restart!</span>"};function Start_Glossary(){playing=!0;1==firstRound?document.getElementById("response").innerHTML="<span style = 'color: Gray;'>Type your answer above to get started!</span>":document.getElementById("response").innerHTML="<span style = 'color: Gray;'>You know how this works!</span>";document.getElementById("table_of_wrongs").innerHTML="";userClearFirstTry=!0;user_entered=[[],[]];correct_words=[];WordList=JSON.parse(JSON.stringify(WordList_Unmodified));document.getElementById("phrase").removeAttribute("onclick");
reversed&&swapWordList();SaveAndClearInput();NewWord()};
